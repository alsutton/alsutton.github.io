<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme="dark"
  class="html"
><head>
  <title>
    
      Al Sutton
        |
        adb backup removal


      


    
  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.89.4" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Al Sutton" />
  <meta
    name="description"
    content="
      


    "
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.b2e0cb07595e3519ab1193bb421914e06c0e26b0cc561fef23b3c6131d4d2ffa.css"
      integrity="sha256-suDLB1leNRmrEZO7QhkU4GwOJrDMVh/vI7PGEx1NL/o="
      crossorigin="anonymous"
      type="text/css"
    />

  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css"
    integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU="
    crossorigin="anonymous"
    type="text/css"
  />
  
    
    
    <link
      rel="stylesheet"
      href="/css/center-image.min.a5cbbd5753ebe48351a006c534a28178d184393f85aed1a6ab256ec7d724af63.css"
      integrity="sha256-pcu9V1Pr5INRoAbFNKKBeNGEOT&#43;FrtGmqyVux9ckr2M="
      crossorigin="anonymous"
      media="screen"
    />

  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.1d14c463c20786ac959f4bd98e0ddc6056d936223bfc1dcbe7825ddc176121c1.css"
    integrity="sha256-HRTEY8IHhqyVn0vZjg3cYFbZNiI7/B3L54Jd3BdhIcE="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.dbef5d0848ad38377fc1031d9a05829ad77d1cdd54177a1e7063905b0876018a.css"
    integrity="sha256-2&#43;9dCEitODd/wQMdmgWCmtd9HN1UF3oecGOQWwh2AYo="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.bd884e18f3674c4c3ae3e69a8a6d7d29b822c5638132c1dc845abec77e955c3f.css"
    integrity="sha256-vYhOGPNnTEw64&#43;aaim19KbgixWOBMsHchFq&#43;x36VXD8="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

  <link rel="canonical" href="/post/adb-backup-removal/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.46e6a54097480084f8f52c20ca1aa7425b4fad17029a887fd4017b12e311a72d.js"
    integrity="sha256-RualQJdIAIT49SwgyhqnQltPrRcCmoh/1AF7EuMRpy0="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.5557c8ff5617a01067ac258fd70b9b992506e379317b0da51e5e0f6e018b408a.js"
      integrity="sha256-VVfI/1YXoBBnrCWP1wubmSUG43kxew2lHl4PbgGLQIo="
      crossorigin="anonymous"
    ></script>

  

  


  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="adb backup removal"/>
<meta name="twitter:description" content="Today I&rsquo;ve submitted a patch to the AOSP to continue something which was probably, externally, one of the least popular things I did while I was at Google; Start eradicating adb backup support from Android devices.
Why? The reason is I think it&rsquo;s dangerous. Not for everyone, certainly not for a majority of folk, but for a small number of people there is a use case which I see as having potentially very serious consequences; Whistle-blowers, dissidents, and potentially even journalists reporting from less than friendly countries."/>



  
  <meta property="og:title" content="adb backup removal" />
<meta property="og:description" content="Today I&rsquo;ve submitted a patch to the AOSP to continue something which was probably, externally, one of the least popular things I did while I was at Google; Start eradicating adb backup support from Android devices.
Why? The reason is I think it&rsquo;s dangerous. Not for everyone, certainly not for a majority of folk, but for a small number of people there is a use case which I see as having potentially very serious consequences; Whistle-blowers, dissidents, and potentially even journalists reporting from less than friendly countries." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/adb-backup-removal/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-08-03T12:45:54+00:00" />
<meta property="article:modified_time" content="2021-08-03T12:45:54+00:00" /><meta property="og:site_name" content="Al Sutton" />




  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "post",
        "name": "adb backup removal",
        "headline": "adb backup removal",
        "alternativeHeadline": "",
        "description": "
      
        Today I\u0026rsquo;ve submitted a patch to the AOSP to continue something which was probably, externally, one of the least popular things I did while I was at Google; Start eradicating adb backup support from Android devices.\nWhy? The reason is I think it\u0026rsquo;s dangerous. Not for everyone, certainly not for a majority of folk, but for a small number of people there is a use case which I see as having potentially very serious consequences; Whistle-blowers, dissidents, and potentially even journalists reporting from less than friendly countries.


      


    ",
        "inLanguage": "en-gb",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "\/post\/adb-backup-removal\/"
        },
        "author" : {
            "@type": "Person",
            "name": "alsutton"
        },
        "creator" : {
            "@type": "Person",
            "name": "alsutton"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "alsutton"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "alsutton"
        },
        "copyrightYear" : "2021",
        "dateCreated": "2021-08-03T12:45:54.00Z",
        "datePublished": "2021-08-03T12:45:54.00Z",
        "dateModified": "2021-08-03T12:45:54.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "alsutton",
            "url": "/",
            "logo": {
                "@type": "ImageObject",
                "url": "\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
      ]

    ,
        "url" : "\/post\/adb-backup-removal\/",
        "wordCount" : "820",
        "genre" : [ 
      
      "AOSP"

    ],
        "keywords" : [ ]
    }
  </script>



</head>
<body
    
      class="body theme--dark"

    
  >
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"

        
      ><div
  class="sidebar
    .

  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/profile.jpeg"
        alt="profile picture"
      />
      
        <div class="sidebar__introduction-title">
          <a href="/">Al Sutton</a>
        </div>

      
      <div class="sidebar__introduction-description">
        <p></p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://www.linkedin.com/in/alsutton/"
            target="_blank"
            rel="noopener"
            aria-label="Linkedin"
            title="Linkedin"
          >
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a
            href="https://github.com/alsutton"
            target="_blank"
            rel="noopener"
            aria-label="GitHub"
            title="GitHub"
          >
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a
            href="https://www.alsutton.blog/index.xml"
            target="_blank"
            rel="noopener"
            aria-label="RSS"
            title="RSS"
          >
            <i class="fas fa-rss fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Al Sutton
        2022


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.fae9ac8895995fe91958b3954be11e96025824a04770726a3531e119ddd2d576.js"
    integrity="sha256-&#43;umsiJWZX&#43;kZWLOVS&#43;EelgJYJKBHcHJqNTHhGd3S1XY="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main
        
          class="wrapper__main"

        
      >
        <header class="header"><div
  class="
    .

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
        
        
          <li class="nav__list-item">
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>

        


      
        
        
          <li class="nav__list-item">
            <a
              
              href="/post/"
              
              title=""
              >Posts</a
            >
          </li>

        


      
        
        
          <li class="nav__list-item">
            <a
              
              href="https://github.com/alsutton"
              
                target="_blank" rel="noopener noreferrer"

              
              title=""
              >Projects</a
            >
          </li>

        


      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>

      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      .

    "
  >
    
    <div class="post__content">
      <h1>Adb Backup Removal</h1>
      
        <ul class="post__meta">
          <li class="post__meta-item">
            <em class="fas fa-calendar-day post__meta-icon"></em>
            <span class="post__meta-text"
              >
                Tue, Aug 3, 2021


              
            </span>
          </li>
          <li class="post__meta-item">
            <em class="fas fa-stopwatch post__meta-icon"></em>
            <span class="post__meta-text">4-minute read</span>
          </li>
        </ul>

      <p>Today I&rsquo;ve <a href="https://android-review.googlesource.com/c/platform/packages/modules/adb/+/1784571">submitted a patch</a> to the AOSP to continue something which was probably, externally, one of the 
least popular things I did while I was at Google; Start eradicating <code>adb backup</code> support from Android devices.</p>
<h2 id="why">Why?</h2>
<p>The reason is I think it&rsquo;s dangerous. Not for everyone, certainly not for a majority of folk, but for a small number
of people there is a use case which I see as having potentially very serious consequences; Whistle-blowers, 
dissidents, and potentially even journalists reporting from less than friendly countries.</p>
<h2 id="how-can-that-be">How can that be?</h2>
<p>Around the world there are many jurisdictions where your password can be obtained relatively easily. Some
have <a href="https://en.wikipedia.org/wiki/Key_disclosure_law">key disclosure laws</a>, while in others the approach shown
by <a href="https://xkcd.com/538/">XKCD #538</a> might be used;</p>
<p><img src="https://imgs.xkcd.com/comics/security.png" alt="XKCD 538"></p>
<p>Either way it will give the local authorities (or others employing similar tactics) the ability to unlock
your phone.</p>
<p>While this may not seem to scary, once you have an unlocked phone it takes a few minutes to get a lot of 
interesting data from it using <code>adb backup</code> via <a href="https://9to5google.com/2017/11/04/how-to-backup-restore-android-device-data-android-basics/">a few steps</a>.
It&rsquo;s something that, say, a law enforcement officer or border control guard could do while &ldquo;inspecting&rdquo; your
device after requiring you to hand over the unlock code for it. They might turn their back on you for
5 minutes to look at it, and even connect it to a charging cable, so you&rsquo;re not worried about them draining
your battery. In that time they can get enough data to learn a lot about your life.</p>
<h2 id="whats-in-the-backup">What&rsquo;s in the backup?</h2>
<p>Some apps allow backups, and in those cases an adb backup contains all the data the app offers up for
backing up. That&rsquo;ll not only show that the app is installed on your device, but, depending on how the
app stores its backup data, it could also give anyone with access to the backup clear-text access to 
the apps' data.</p>
<p>Many apps opt out of the backup system, so you may think there&rsquo;s no trace of them, but that&rsquo;s not 
necessarily true&hellip;.</p>
<p>One of the most interesting things is the launcher favorites database. If you extract your backup
to a directory (using a command you can find on <a href="https://android.stackexchange.com/questions/28481/how-do-you-extract-an-apps-data-from-a-full-backup-made-through-adb-backup/78183#78183">Stack Overflow</a>), you&rsquo;ll find it in 
<code>apps/com.google.android.apps.nexuslauncher/db</code>. Running a bog-standard copy of <code>sqlite3</code> against it
will let you query the favorites table to see what the user has been using frequently.</p>
<p>In my case, querying the launcher database from a backup of Android 11 with the latest security patches 
gives the following;</p>
<pre tabindex="0"><code>alsutton@svr204:~/temp/3/apps/com.google.android.apps.nexuslauncher/db$ sqlite3 launcher.db
SQLite version 3.32.2 2020-06-04 12:58:43
Enter &quot;.help&quot; for usage hints.
sqlite&gt; select title from favorites;
Phone
Messages
Play Store
Chrome
Camera
Slack
Signal
sqlite&gt; 
</code></pre><p>This was after installing Signal and running it three times. So with something that could be a 
one line script someone can determine I&rsquo;m likely to be a user of end-to-end encryption.</p>
<p>The backup also contained the pictures I&rsquo;ve taken with the phone. In my case it&rsquo;s a boring picture
of a painting on my wall, not the type of thing that&rsquo;ll trigger a major incident, but then again I tend to only take boring &lsquo;photos.</p>
<p>Now imagine being a &ldquo;person of interest&rdquo; leaving a country and within 10 minutes the border official
can determine that you have Signal installed and see what photos you have. 10 minutes in some airports
is not enough time to get from border control to either a boarding gate or an exit, and if you&rsquo;re on a watch
list you&rsquo;re likely to get priority treatment for the data coming off your device.</p>
<p><strong>Update:</strong> Third-party apps targeting Android 12, when it&rsquo;s released, <a href="https://developer.android.com/about/versions/12/behavior-changes-12#adb-backup-restrictions">will not have their data included in an <code>adb backup</code>
backup unless they&rsquo;re declared as debuggable</a>
(Thanks to Toby Thierer for <a href="https://twitter.com/15characterlimi/status/1422621425488343040?s=20">pointing this out</a>). Unfortunately
the launcher favorites database mentioned <strong>is</strong> still included in an <code>adb backup</code> backup.</p>
<h2 id="but-adb-backups-password">But adb backups&rsquo; password!</h2>
<p>Yes, you should always use a password for your <code>adb backup</code> backup, but if you remember the start of this post
I mentioned the key disclosure laws some countries have. The official has the unlocked device completely
under their control and so can make a backup without a password.</p>
<h2 id="youre-scare-mongering">You&rsquo;re scare-mongering!</h2>
<p>For many folk this isn&rsquo;t a problem. I doubt anyone would be interested in a backup of my &lsquo;phone if they
got hold of it, but for a few folk this could be a real problem, and when you&rsquo;re talking about an OS
which is in use on over 2bn devices, a problem for 0.00001% of users is a real problem for 200 people.</p>
<h2 id="feedback">Feedback</h2>
<p>Hopefully you can see now why I feel that, for all the benefits folk get from <code>adb backup</code>, there are
some folk who might pay a heavy price for its&rsquo; existence, and why I feel it should be removed.</p>
<p>If you have feedback on things that could be improved, added, or should be removed you can find me on 
<a href="https://mastodon.social/@alsutton">Mastodon</a>, <a href="https://github.com/alsutton/">GitHub</a>, 
and <a href="https://twitter.com/alsutton">Twitter</a>.</p>
</div>
    <div class="post__footer">
      
        <span><a class="category" href="/categories/AOSP/">AOSP</a></span>




      

      
    </div>

    
  </div>


      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Al Sutton
        2022


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.fae9ac8895995fe91958b3954be11e96025824a04770726a3531e119ddd2d576.js"
    integrity="sha256-&#43;umsiJWZX&#43;kZWLOVS&#43;EelgJYJKBHcHJqNTHhGd3S1XY="
    crossorigin="anonymous"
  ></script></body>
</html>
