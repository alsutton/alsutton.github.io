<!DOCTYPE html>
<html lang="en" data-theme=""><head>
    <title> Al Sutton | Android Tablet &amp; Phone UIs in one APK [HOW TO] </title>

    
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.81.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="">
    
    <link rel="stylesheet"
          href="/css/style.min.0c643de4008adca329f7a2d616ce308cca99d4ef45e4cca307323e7857910194.css"
          integrity="sha256-DGQ95ACK3KMp96LWFs4wjMqZ1O9F5MyjBzI&#43;eFeRAZQ="
          crossorigin="anonymous"
          type="text/css">
    
    <link rel="stylesheet"
        href="/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css"
        integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS&#43;yuWSR4="
        crossorigin="anonymous"
        type="text/css">
    
    <link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" 
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" 
    crossorigin="anonymous" />

    
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

    <link rel="canonical" href="/post/android-tablet-phone-uis-in-one-apk-how-to/">

    
    
    
    
    <script type="text/javascript"
            src="/js/anatole-header.min.0c05c0a90d28c968a1cad4fb31abd0b8e1264e788ccefed022ae1d3b6f627514.js"
            integrity="sha256-DAXAqQ0oyWihytT7MavQuOEmTniMzv7QIq4dO29idRQ="
            crossorigin="anonymous"></script>


    
        
        
        <script type="text/javascript"
                src="/js/anatole-theme-switcher.min.8ef71e0fd43f21a303733dbbecae5438b791d2b826c68a9883bd7aa459a076d2.js"
                integrity="sha256-jvceD9Q/IaMDcz277K5UOLeR0rgmxoqYg716pFmgdtI="
                crossorigin="anonymous"></script>
    
    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/images/profile.png"/>

<meta name="twitter:title" content="Android Tablet &amp; Phone UIs in one APK [HOW TO]"/>
<meta name="twitter:description" content="(the code and application links are at the bottom of the article for those who are a bit impatient)
At DroidCon UK this year I presented a talk on why Android developers should be thinking about tablets and I touched upon creating UIs which can adapt to the device they&rsquo;re on. Anyone who attended DroidCon UK has now had plenty of time to get a head start so I&rsquo;m now going to show one method of getting an Android application to adapt itself to present an appropriate UI."/>

</head>
<body><div class="sidebar animated fadeInDown ">
    <div class="logo-title">
        <div class="title">
            <img src="/images/profile.jpeg" alt="profile picture">
            <h3 title=""><a href="/">Al Sutton</a></h3>
            <div class="description">
                <p></p>
            </div>
        </div>
    </div>
    <ul class="social-links">
        
            <li>
                <a href="https://www.linkedin.com/in/alsutton/" rel="me" aria-label="Linkedin">
                    <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="https://github.com/alsutton" rel="me" aria-label="GitHub">
                    <i class="fab fa-github fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; Al Sutton  2021 </div>
    </div>
</div>
<div class="main">
    <div class="page-top  animated fadeInDown ">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
    </a>
    <ul class="nav" id="navMenu">
        
        
            
            <li><a 
                   href="/"
                        
                   title="">Home</a></li>
        
            
            <li><a 
                   href="/post/"
                        
                   title="">Posts</a></li>
        
            
            <li><a 
                   href="https://github.com/alsutton"
                        
                            target="_blank"
                            rel="noopener noreferrer"
                        
                   title="">Projects</a></li>
        
        
        
            <li class="theme-switch-item">
                <a class="theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </li>
        
    </ul>
</div>

    <div class="autopagerize_page_element">
        <div class="content">
    <div class="post  animated fadeInDown ">
        <div class="post-content">
            
            <div class="post-title">
                <h3>Android Tablet &amp; Phone UIs in one APK [HOW TO]</h3>
                
                    <div class="info">
                        <em class="fas fa-calendar-day"></em>
                        <span class="date"> Tue, Dec 7, 2010 
                                           </span>
                        <em class="fas fa-stopwatch"></em>
                        <span class="reading-time">6-minute read</span>
                    </div>
                
            </div>

            <p><em>(the code and application links are at the bottom of the article for those who are a bit impatient)</em></p>
<p>At <a href="http://www.droidcon.co.uk/">DroidCon UK</a> this year I presented a talk on why Android developers should be thinking about tablets and I touched upon creating UIs which can adapt to the device they&rsquo;re on. Anyone who attended DroidCon UK has now had plenty of time to get a head start so I&rsquo;m now going to show one method of getting an Android application to adapt itself to present an appropriate UI.</p>
<p>Please note that this demonstration is designed to work on devices running 1.6 and above. If you&rsquo;re targeting more recent versions of Android you can make some improvements (e.g. using <code>include</code> in the layouts for common parts), but as some tablets are currently shipping with Android 1.6 I&rsquo;ve tried to be as inclusive as possible.</p>
<p>So let&rsquo;s get started;</p>
<p><strong>Step #1 - The Manifest</strong></p>
<p>You&rsquo;ll need ensure the applications manifest states your application is capable of supporting <code>large</code> (and, in Gingerbread, <code>extra large</code>) screens. There are two ways of doing this, either via explicitly listing the screens you want to support in the <a href="http://developer.android.com/guide/topics/manifest/supports-screens-element.html">supports screens</a> element, or choosing an appropriate <a href="http://developer.android.com/guide/topics/manifest/uses-sdk-element.html">targetSDK value in uses-sdk element</a> which implies your app supports the screen types you want.</p>
<p>I&rsquo;ve used the second method and declared Gingerbread (API Level 9) as the target SDK (purely because it involves less typing), and as I&rsquo;m trying to keep compatibility with Android 1.6 my uses-sdk line looks like this;</p>
<p><code>.... &lt;uses-sdk android:minSdkVersion=&quot;4&quot; android:targetSdkVersion=&quot;9&quot;/&gt; ....</code></p>
<p><strong>Step #2 - Layouts</strong></p>
<p>You&rsquo;re going to need to decide which orientations and sizes you want to treat differently. I&rsquo;ve chosen screens which are being used in landscape mode that Android reports as being <code>large</code> or <code>extra large</code> (which should <a href="http://developer.android.com/guide/practices/screens_support.html#range">cover most tablet screen sizes</a>).</p>
<p>The reason behind my choice is that in portrait mode users appreciate seeing more items on a list, but in landscape mode many layouts end up just leaving more blank space on each line to fill the screen, which isn&rsquo;t really useful to anyone, so I&rsquo;m going to create some layouts to support an application which presents users with a list on one screen and the data on another on most devices, but on a landscape orientated large (or extra large) screen device will show a list &amp; data view combination on a single screen.</p>
<p>When you&rsquo;ve selected the orientations and sizes you want to create special layouts for you&rsquo;ll need to create the appropriate layout folders (You can find details on the naming scheme in the <a href="http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources">Android documentation</a>). I&rsquo;m going for <code>large</code> and <code>extra large</code> screens in landscape mode so I end up with the following three resource directories;</p>
<p><code>layout</code> (which contains the default layouts)
<code>layout-large-land</code> (which contains my large and extra large landscape layouts)
<!-- raw HTML omitted --><code>layout-xlarge-land</code> (which contains a 2nd copy of my large and extra large landscape layouts)
<!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted -->The copy in <code>layout-xlarge-land</code> is needed because Android 2.3 (Gingerbread) will use the <code>layout</code> resources on an <code>extra large</code> screen unless it finds layouts specifically marked for <code>extra large</code> screens. 
<!-- raw HTML omitted --></p>
<p><em>(Thanks to <a href="http://twitter.com/#!/morrildl">Dan Morrill</a> for letting me know the <code>xlarge</code> copy isn&rsquo;t necessary)</em></p>
<p>The <code>layout</code> and <code>layout-large-land</code> folders both contain two layouts with the same names; <code>my_list_view.xml</code> for an activity designed to show a list of options, and <code>my_main_view.xml</code> for an activity designed to show the selected option.</p>
<p>The differences between the layouts in the folders is that the <code>my_list_view.xml</code> in <code>layout</code> has a hidden element (using <code>android:visible=&quot;gone&quot;</code>) that isn&rsquo;t in the version of <code>my_list_view.xml</code> in <code>layout-large-land</code> and the <code>my_main_view.xml</code> in <code>layout-large-land</code> has a ListView which is to be shown on large and extra large landscape devices which isn&rsquo;t in the <code>my_main_view.xml</code> for the other screen sizes and orientations.</p>
<p>The single landscape tablet layout I&rsquo;m aiming for looks like this;</p>
<p><img src="http://als-blog-stuff.s3.amazonaws.com/tab-land.png" alt=""></p>
<p>and the two non-landscape/non-tablet layouts should look like this;</p>
<p><img src="http://als-blog-stuff.s3.amazonaws.com/norm-list.png" alt=""> <img src="http://als-blog-stuff.s3.amazonaws.com/norm-selected.png" alt=""></p>
<p><strong>Step #3 - The code</strong></p>
<p>There are only two, relatively simple, <code>Activity</code> classes needed to achieve the UI changes I want. The demo also includes a <code>ListAdapter</code>, but this has no special features for dealing with any screen size or orientation.</p>
<p>When the user starts the application the activity called <code>MyListActivity</code> is started. It&rsquo;s primarily designed to display a list of options the user can select from and it sets its' content view to <code>R.layout.my_list_view</code>. Due to the resolution independent features introduced in Android 1.6 the OS will pick either the default layout (with the hidden element), or the alternative one (without it) automatically and the activity then has an easy way of telling whether the activity is running on a large/extra large landscape screen by checking for the existence of the hidden element using <code>findViewById</code>.</p>
<p>If <code>findViewById</code> returns null the activity knows the hidden element isn&rsquo;t in the selected layout and so it must be running on a <code>large</code> or <code>extra large</code> screen device in landscape mode. It can then start the main display activity, call <code>finish()</code> to indicate that all the work in the option displaying activity has been done, and exit.</p>
<p>If <code>findViewById</code> returns something other than null then the hidden element is present which means the activitiy is running on another size screen or in portrait mode.  It can then populate the option list, wait for the user to make a selection, and then start the main display activity passing the users selection as an extra in the Intent.</p>
<p>The main display activity works in a similar way; It uses <code>findViewById</code> to see if the version of <code>my_main_view.xml</code> selected by Android has a <code>ListView</code>. If a <code>ListView</code> is present it knows it&rsquo;s on a <code>large</code>/<code>extra large</code> landscape screen and so it populates the list and sets up an appropriate Listener to process selections from the <code>ListView</code> by the user.</p>
<p>If the <code>ListView</code> isn&rsquo;t present then the application knows it&rsquo;s on another screen size or orientation and so it looks for the details of what to display and displays it.</p>
<p>There is only one other thing that needs to be considered, and that&rsquo;s an orientation change when the user is looking at the main display view. This can be handled (in a not-too pretty way), in two steps;</p>
<p>#1- Whenever the <code>ListView</code> activity starts the main display activity it must call <code>finish()</code> to remove itself from the activity stack.
#2- In the main display activity we need to override <code>onKeyDown</code>, check for the back key being pressed, and if it is and the <code>ListView</code> is not present on the currently displayed layout (i.e. we&rsquo;re not in landscape mode on a <code>large</code>/<code>extra large</code> screen) we need to restart the activity which shows the user the options to choose from.</p>
<p><em>(If anyone has any suggestions for a cleaner solution I&rsquo;d be happy to hear it)</em></p>
<p>Step #4 - Relax</p>
<p>Which is always the most important step :)</p>
<p>I&rsquo;ve made an eclipse project of the code available <a href="http://als-blog-stuff.s3.amazonaws.com/AndroidAdaptiveUI.zip">here</a> so you can look over the code, and a compiled version of the application is available <a href="http://als-blog-stuff.s3.amazonaws.com/AndroidAdaptiveUI.apk">here</a>.</p>
</div>
        <div class="post-footer">
            <div class="info">
                <span class="separator"><a class="category" href="/categories/Android/">Android</a></span>

                
            </div>
        </div>

        
    </div>


        </div>
    </div>
</div>

<script type="text/javascript"
        src="/js/jquery.min.72e5cdc7ae76325aa57a51c185e2b93c1b216e69c1a4fec5e53a9035977f931e.js"
        integrity="sha256-cuXNx652MlqlelHBheK5PBshbmnBpP7F5TqQNZd/kx4="
        crossorigin="anonymous"></script>




<script type="text/javascript"
        src="/js/bundle.min.c8b242abc1fe7aff347bfd713f638199bc03c20706de4041bd4c06133f49d0a0.js"
        integrity="sha256-yLJCq8H&#43;ev80e/1xP2OBmbwDwgcG3kBBvUwGEz9J0KA="
        crossorigin="anonymous"></script>

<script type="text/javascript"
        src="/js/medium-zoom.min.2d6fd0be87fa98f0c9b4dc2536b312bbca48757f584f6ea1f394abc9bcc38fbc.js"
        integrity="sha256-LW/Qvof6mPDJtNwlNrMSu8pIdX9YT26h85SrybzDj7w="
        crossorigin="anonymous"></script>
</body>

</html>
