<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme="dark"
><head>
  <title>
    Al Sutton
      |
      Multi-Core Android 101


    

  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.89.4" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta
    name="description"
    content="
      


    "
  />
  
  
  
  <link
    rel="stylesheet"
    href="/css/main.min.51423ad97099a08f3a20e16d238c13adae76db7dd5e1913789bdc81143ff4cc6.css"
    integrity="sha256-UUI62XCZoI86IOFtI4wTra52233V4ZE3ib3IEUP/TMY="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css"
    integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS&#43;yuWSR4="
    crossorigin="anonymous"
    type="text/css"
  />
  
    
    
    <link
      rel="stylesheet"
      href="/css/center-image.min.a5cbbd5753ebe48351a006c534a28178d184393f85aed1a6ab256ec7d724af63.css"
      integrity="sha256-pcu9V1Pr5INRoAbFNKKBeNGEOT&#43;FrtGmqyVux9ckr2M="
      crossorigin="anonymous"
      media="screen"
    />

  
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous"
  />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

  <link rel="canonical" href="/post/multi-core-android-101/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.2a2cd9614b7d007dfbb75e8da19e3a0fa872ceab53c6d000c00b7a0c89b85bfc.js"
    integrity="sha256-KizZYUt9AH37t16NoZ46D6hyzqtTxtAAwAt6DIm4W/w="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.7fd87181cdd7e8413aa64b6867bb32f3a8dc242e684fc7d5bbb9f600dbc2b6eb.js"
      integrity="sha256-f9hxgc3X6EE6pktoZ7sy86jcJC5oT8fVu7n2ANvCtus="
      crossorigin="anonymous"
    ></script>

  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Multi-Core Android 101"/>
<meta name="twitter:description" content="Some of you may already be familiar with multi-core programming, so a lot of what I&rsquo;m going to cover will be very familiar to you, but some Android developers may have never written for (or considered) how the multiple CPU cores available on CPUs such as Nvidias Tegra 2 chips (as rumoured to be in the Motorola Honeycomb Tablet) can improve the speed of their applications if the applications are written in a multi-core friendly manner."/>



  
</head>
<body>
    <header><div
  class="page-top 
    .

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </a>
  <nav>
    <ul class="nav__list" id="navMenu">
      <div class="nav__links">
        
        
          
          <li>
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/post/"
              
              title=""
              >Posts</a
            >
          </li>

        
          
          <li>
            <a
              
              href="https://github.com/alsutton"
              
                target="_blank" rel="noopener noreferrer"

              
              title=""
              >Projects</a
            >
          </li>

        
        
      </div>
      <li>
        
          <a class="theme-switch" title="Switch Theme">
            <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
          </a>

        
      </li>
    </ul>
  </nav>
</div>
</header>
    <div class="wrapper">
      <aside><div
  class="sidebar
    .

  "
>
  <div class="sidebar__content">
    <div class="logo-title">
      <div class="title">
        <img src="/images/profile.jpeg" alt="profile picture" />
        <h3 title=""><a href="/">Al Sutton</a></h3>
        <div class="description">
          <p></p>
        </div>
      </div>
    </div>
    <ul class="social-links">
      
        <li>
          <a href="https://www.linkedin.com/in/alsutton/" rel="me" aria-label="Linkedin">
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li>
          <a href="https://github.com/alsutton" rel="me" aria-label="GitHub">
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li>
          <a href="https://www.alsutton.blog/index.xml" rel="me" aria-label="RSS">
            <i class="fas fa-rss fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  </div><footer class="footer footer--sidebar">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          Al Sutton
          2021


        
      </li>
      
    </ul>
  </div>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js"
    integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main>
        <div class="autopagerize_page_element">
          <div class="content">
  <div
    class="post 
      .

    "
  >
    <div class="post-content">
      
      <div class="post-title">
        <h1>Multi-Core Android 101</h1>
        
          <div class="info">
            <em class="fas fa-calendar-day"></em>
            <span class="date"
              >
                Thu, Dec 30, 2010


              </span
            >
            <em class="fas fa-stopwatch"></em>
            <span class="reading-time">5-minute read</span>
          </div>

        
      </div><p>Some of you may already be familiar with multi-core programming, so a lot of what I&rsquo;m going to cover will be very familiar to you, but some Android developers may have never written for (or considered) how the multiple CPU cores available on CPUs such as Nvidias Tegra 2 chips (as rumoured to be in the Motorola Honeycomb Tablet) can improve the speed of their applications if the applications are written in a multi-core friendly manner.</p>
<p><strong>Multi-Core 101</strong></p>
<p>If you&rsquo;re not familiar with multi-core programming here&rsquo;s a quick intro; The main thing to remember is that multiple cores mean multiple tasks can be performed at the same time (specifically one per core). I don&rsquo;t mean the tasks appear to run at the same time, as happens with single core architectures like the Qualcomm Snapdragon found in many current devices (which switches between multiple tasks very quickly but has only one task running at any point in time), on a multi-core device multiple tasks are running at the same point in time (i.e. concurrently).</p>
<p>If you&rsquo;re wondering what the advantage of a multi-core CPU is then you might want to think about this very simple example; You have an app which monitors updates from a couple of RSS feeds and performs a task for each update; While your application is running it becomes aware that both feeds have been updated and it needs to perform the task for each feed. On a single core device you could either run the task for first feed and then the task for the second or try to run both at once and rely on the OS to switch between the tasks for each feed; Either way the time taken in total will be roughly the same if the tasks are CPU intensive. On a multi-core device the tasks for each feed could run on different cores at the same time, and so the total time would be significantly less.</p>
<p>Even apps which aren&rsquo;t designed for multiple cores can see an improvement in performance on a multi-core device; Android is constantly doing things whilst your application is running and on a single core device your application can get interrupted whenever Android needs to do something. With a multi-core device Android could do most of it&rsquo;s work on another core and so your application gets interrupted less.</p>
<p><strong>Using the cores</strong></p>
<p>Java and Android already have a good framework for dealing with multi-core CPUs via <a href="http://developer.android.com/reference/java/lang/Thread.html">Thread</a>s, <a href="http://developer.android.com/reference/android/os/AsyncTask.html">AsyncTask</a>s, and <a href="http://developer.android.com/reference/android/app/Service.html">Service</a>s. All of these allow you to run tasks which can be run along-side other tasks and activities. With a version of Android which supports multiple cores the tasks can be shared out between the available cores to allow as many of them as possible to be running at the same point in time.</p>
<p>Each of them has benefits and draw backs, so I&rsquo;ll provide an overview of each one;</p>
<p><code>Thread</code></p>
<p>Threads are part of Java and you can use them by either extending the Thread class or implementing the <a href="http://developer.android.com/reference/java/lang/Runnable.html">Runnable</a> interface and passing it to a Thread instance. Due to Threads being part of Java (and not an Android specific addition) they are not aware of the constraints Androids has on certain operations. For example; If you start a Thread and try to interact with your user interface you&rsquo;ll get an error. They also have no in-built limiter so you can try to start 1000 Threads for 1000 CPU intensive tasks but you&rsquo;ll end up with a pretty unresponsive app and possibly an unresponsive device.</p>
<p>In most cases you only want to use Threads for reasonably short running tasks which aren&rsquo;t associated with a UI action and don&rsquo;t need to modify the UI. For tasks which interact with the UI an AsyncTask is a better solution, or, for longer running non-UI orientated tasks, a Service is a better choice.</p>
<p><code>AsyncTask</code></p>
<p>AsyncTask is an Android addition to Java. It&rsquo;s aware of the Android environment, offers methods for interacting with the user interface which won&rsquo;t cause errors, and uses a mechanism known as thread pooling (<a href="http://android.git.kernel.org/?p=platform/frameworks/base.git;a=blob;f=core/java/android/os/AsyncTask.java;h=5fb1d7c32879352170abbd6c56c1aa81f5fae175;hb=refs/heads/gingerbread#l145">using a</a> <a href="http://developer.android.com/reference/java/util/concurrent/ThreadPoolExecutor.html">ThreadPoolExecutor</a>) to ensure that you don&rsquo;t try to do too many things at once.</p>
<p>If you read the Android documentation the emphasis is slanted towards UI interaction, but there is nothing which says you must interact with your applications UI in an AsyncTask, you only need to start your AsyncTask from your applications UI Thread, so you can make use of the ability for AsyncTask to limit the number of concurrent tasks to ensure that you don&rsquo;t start to bog down the device and keep your app reasonably responsive.</p>
<p>In most cases, when you have a task to perform that is closely related to the current activity using an AsyncTask is a good idea even if you don&rsquo;t need to interact with the UI whilst the task is running.</p>
<p><code>Service</code></p>
<p>Service is an Android Addition to Java and is ideal for longer running tasks.</p>
<p>You shouldn&rsquo;t try to interact with an activities UI from a Service, but instead you can use <a href="http://developer.android.com/guide/topics/ui/notifiers/notifications.html">Androids Notification mechanism</a> to let the user know when the task has completed. This allows the user to go and do other things with their device and not become frustrated with your application because they have to keep your app on screen and wait for a long task to complete.</p>
<p><strong>So now what?</strong></p>
<p>Now you should have an understanding of how you can use Threads, AsyncTasks, and Services to split your application into sections which Android can spread around the available CPU cores. It doesn&rsquo;t matter if there is only a single core (as in the Nexus S), or multiple (as in the Motorola XOOM tablet), the OS will distribute the tasks accordingly, but, if you don&rsquo;t split your application up,  Android probably won&rsquo;t know it can split the tasks across the available cores and so your application won&rsquo;t make the best use of the resources available.</p>
<p><strong>Further Reading</strong></p>
<p>The Android Developers Blog has <a href="http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html">a great post</a> showing how to implement an AsyncTask.</p>
</div>
    <div class="post-footer">
      <div class="info">
        
          <span class="separator"><a class="category" href="/categories/Android/">Android</a></span>




        

        
      </div>
    </div>

    
  </div>


          </div>
        </div>
      </main>
    </div><footer class="footer footer--base">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          Al Sutton
          2021


        
      </li>
      
    </ul>
  </div>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js"
    integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I="
    crossorigin="anonymous"
  ></script></body>
</html>
